<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/assets/font/fontawesome/css/all.css">
    <link rel="stylesheet" href="/assets/font/themify-icons/themify-icons.css">
    <link
    rel="apple-touch-icon-precomposed"
    sizes="144x144"
    href="img/ico/apple-touch-icon-144-precomposed.png"
  />

  <link rel="stylesheet" href="../assets/css/grid.css">
  <link rel="stylesheet" href="../assets/css/base.css">
  <link rel="stylesheet" href="../assets/css/main.css">
  <link rel="stylesheet" href="../assets/css/responsive.css">
</head>
<body>
    <div id="detail">
        <div class="header">
            <div class="header-top">
                <div class="grid">
                    <div class="header-top-content">
                        <ul class="contact-list">
                            <li class="contact-item">
                                <a href="" class="contact-item__link">
                                    <i class="fa fa-phone"></i>
                                    <span class="contact-item__info">+2 95 01 88 821</span>
                                </a>
                            </li>
                            <li class="contact-item">
                                <a href="" class="contact-item__link">
                                    <i class="fa fa-envelope"></i>
                                    <span class="contact-item__info"> info@domain.com</span>
                                </a>
                            </li>
                        </ul>
                        <ul class="socials">
                            <li class="social">
                                <a href="#" class="social-link">
                                    <i class="fab fa-facebook-f"></i>
                                </a>
                                <a href="#" class="social-link">
                                    <i class="fab fa-twitter"></i>
                                </a>
                                <a href="#" class="social-link">
                                    <i class="fab fa-linkedin"></i>
                                </a>
                                <a href="#" class="social-link">
                                    <i class="fab fa-dribbble"></i>
                                </a>
                                <a href="#" class="social-link">
                                    <i class="fab fa-google-plus"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="header-middle">
                <div class="grid header-middle-content">
                    <div class="menu-left">
                        <div class="header-logo">
                            <a href="header-logo__link">
                                <img  class='header-logo__img' src="./assets/img/home/logo.png" alt="">
                            </a>
                        </div>
                        <div class="header-buttons">
                            <div class="header-btn-group" onclick="dropDown(event)">
                                <div class="header-btn">
                                    <span class="header-btn__name">USA</span>
                                    <i class="fas fa-caret-down"></i>
                                </div>
                                <div class="sub-menu">
                                    <ul>
                                        <li>
                                            <a href="">Canada Dollar</a>
                                        </li>
                                        <li>
                                            <a href="">Collar</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="header-btn-group">
                                <div class="header-btn" onclick="dropDown(event)">
                                    <span class="header-btn__name">DOLLAR</span>
                                    <i class="fas fa-caret-down"></i>
                                </div>   
                                <div class="sub-menu" >
                                    <ul>
                                        <li>
                                            <a href="">Canada Dollar</a>
                                        </li>
                                        <li>
                                            <a href="">Uk</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="menu-right">
                        <nav class="header-nav">
                            <ul class="header-menu">
                                <li class="header-menu-item">
                                    <a href="" class="header-menu-item__link">
                                        <i class="fa fa-user"></i>
                                        Account
                                    </a>
                                </li>
                                <li class="header-menu-item">
                                    <a href="" class="header-menu-item__link">
                                        <i class="fa fa-star"></i>
                                        Wishlist
                                    </a>
                                </li>
                                <li class="header-menu-item">
                                    <a href="" class="header-menu-item__link">
                                        <i class="fa fa-crosshairs"></i>
                                        Checkout
                                    </a>
                                </li>
                                <li class="header-menu-item">
                                    <a href="" class="header-menu-item__link">
                                        <i class="fa fa-shopping-cart"></i>
                                        Cart
                                    </a>
                                </li>
                                <li class="header-menu-item">
                                    <a href="" class="header-menu-item__link">
                                        <i class="fa fa-lock"></i>
                                        Login
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
            <div class="header-bottom">
                <div class="grid header-bottom-content">
                    <div class="header-main-menu">
                        <nav class="header-nav">
                            <ul class="header-menu">
                                <li class="header-menu-item active">
                                    <a href="" class="header-menu-item__link">
                                        Home
                                    </a>
                                </li>
                                <li class="header-menu-item">
                                    <a href="" class="header-menu-item__link">
                                        Shop
                                        <i class="fas fa-caret-down"></i>
                                    </a>
                                    <ul class="sub-menu">
                                        <li>
                                            <a href="">Sản phẩm</a>
                                        </li>
                                        <li>
                                            <a href="">Chi tiết sản phầm</a>
                                        </li>
                                        <li>
                                            <a href="">Mua hàng</a>
                                        </li>
                                        <li>
                                            <a href="">Giỏ hàng</a>
                                        </li>
                                        <li>
                                            <a href="">Giỏ hàng</a>
                                        </li>
                                    </ul>
                                </li>
                                <li class="header-menu-item">
                                    <a href="" class="header-menu-item__link">
                                        Block
                                        <i class="fas fa-caret-down"></i>
                                    </a>
                                    <ul class="sub-menu">
                                        <li>
                                            <a href="">Sản phẩm</a>
                                        </li>
                                        <li>
                                            <a href="">Chi tiết sản phầm</a>
                                        </li>
                                    </ul>
                                </li>
                                <li class="header-menu-item">
                                    <a href="" class="header-menu-item__link">
                                        404
                                    </a>
                                </li>
                                <li class="header-menu-item">
                                    <a href="" class="header-menu-item__link">
                                        Contact
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                    <div class="header-search">
                        <div class="header-search__input-group">
                            <input type="text" placeholder="Search">
                        </div>
                        <div class="header-search__btn">
                            <i class="fas fa-search"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="main">
            <div class="grid">
                <div class="row detail-content">
                    
                </div>
            </div>
        </div>
    </div>
    <script src="../assets/js/plugins/axios/dist/axios.min.js"></script>
    <script src="../assets/js/plugins/js/price-range.js"></script>
    <script>
        const api = 'http://localhost:8000/api'
        const apiJ = 'http://localhost:3000'
        const detailHtml= document.querySelector('#detail .detail-content')
        let detailProduct = {}
        let detailCate = {}
        let quantity = 1
        const productCart = {...JSON.parse(localStorage.getItem('product_cart'))}// [] {} phai parse va stringify , {...} ko co gi cung k lam thay doi cau truc

        async function getDetail(id, idCate) {// k ai ranh di vao local xoa
           let products = await axios.get(`${apiJ}/productAll`)
           console.log(products)
           let cates = await axios.get(`${apiJ}/category`)
           products.data.forEach(p => {
               if(p.id === id) {
                   detailProduct = p
               }
           })
           cates.data.forEach(c => {
               if(c.id === idCate) {
                   detailCate = c
               }
           })
           render(detailProduct, detailCate)
           
        }
        function render(detailProduct, detailCate) {
            let x = ''
           x+= `
           <div class="col l-12">
            <div class=" row product-details" id="product-information">
                <div class="col l-5">
                    <div class="view-product">
                    <img style="width: 100%;" src=${detailProduct.image} alt="">
                    </div>
                </div>
                <div class="col l-7 product-content">
                <div class="row" style="width:100%">
                    <div class="col l-6">
                        <div class="product-information">
                        <h2> ${detailProduct.name}</h2>
                        <p class="id">ID: ${detailProduct.id}</p>
                        <p class="date"><b>Ngày đăng:</b> ${detailProduct.createAt}</p>
                        <p class="category"><b>Danh mục:</b> ${detailCate.name}</p>
                        <p class="price"><b>Giá: </b>${detailProduct.price}</p>
                        <p class="sale"><b>Giảm giá: </b>${detailProduct.sale}</p>
                        <p class="quantity" data-id=${quantity} class="product-quantity"><b>Số lượng:</b> ${quantity}</p>
                        <div class="btn-wrap">
                            <button class="btn btn-increase" onclick="changeQuantity('${detailProduct.id}',1)">+</button>
                            <button class="btn btn-reduce" onclick="changeQuantity('${detailProduct.id}',-1)">-</button>
                        </div> 
                        <button onclick="addCart('${detailProduct.id}')" class="btn btn-primary">Thêm vào giỏ hàng</button>
                        </div>
                    </div>
                    <div class="col l-6">
                        <div class="product-description">
                            <div class="bar bar1"></div>
                            <div class="bar bar2"></div>
                            <div class="bar bar3"></div>
                            <div class="bar bar4"></div>
                            <h2>Mô tả</h2>
                            <p>Mèo vàng là một trong ba giống mèo ta phổ biến ở Việt Nam. Đây cũng là loài mèo phổ biến ở châu Á. Đa phần chúng có bộ lông màu vàng, óng mượt và ngắn. Giống mèo này vốn sở hữu gen rất đa dạng. Do đó, chúng ít bị bệnh về di truyền hơn các giống mèo thuần chủng khác. Mèo vàng thường được nuôi trong nhà và được đánh giá là có bản tính tự lập cao. Dáng đi nhanh nhẹn, uyển chuyển. Chúng có tố chất rất thông minh và tinh nghịch.</p>
                        </div>
                    <div>
                </div>
                </div>
                </div>
            </div>
           `
           detailHtml.innerHTML = x
        }
         
        function addCart(id) {
        let product = {quantity:quantity}
        if(productCart[id]) {
            productCart[id].quantity += quantity 
        } else {
            productCart[id] = product
        }
        
        localStorage.setItem('product_cart',JSON.stringify(productCart))
        window.location.href = './cart.html'
        }
        function changeQuantity(id, val) {
            if(val === 1) {
                quantity +=1
            } else {
                quantity -=1
                if(quantity <= 1) {
                    quantity = 1
                }
                
            }
            document.querySelector('.product-information .quantity').innerHTML = `<b>Số lượng:</b> ${quantity}`
        }
        getDetail(localStorage.getItem('id'),localStorage.getItem('id_cate'))
        
    </script>

        <script src="../assets/js/main.js"></script>
</body>
</html>